<div class="container mx-auto px-4 py-8">
  <div class="mb-6">
    <%= link_to "← Back to #{@player.name}", player_path(@player), class: "text-blue-600 hover:text-blue-800 hover:underline" %>
  </div>

  <div class="bg-white rounded-lg shadow p-6 mb-6">
    <h1 class="text-3xl font-bold text-gray-900 mb-2"><%= @player.name %> - Raw Game Data</h1>
    <p class="text-gray-600"><%= @player.team %> - 2023-24 Regular Season</p>
  </div>

  <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
      <p class="text-sm text-blue-600 mb-1">Total Games</p>
      <p class="text-3xl font-bold text-blue-900"><%= @game_logs.count %></p>
    </div>

    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
      <p class="text-sm text-green-600 mb-1">Total Points</p>
      <p class="text-3xl font-bold text-green-900"><%= @game_logs.sum(:points) %></p>
    </div>

    <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
      <p class="text-sm text-purple-600 mb-1">Total Rebounds</p>
      <p class="text-3xl font-bold text-purple-900"><%= @game_logs.sum(:rebounds) %></p>
    </div>

    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
      <p class="text-sm text-yellow-600 mb-1">Total Assists</p>
      <p class="text-3xl font-bold text-yellow-900"><%= @game_logs.sum(:assists) %></p>
    </div>

    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
      <p class="text-sm text-red-600 mb-1">Date Range</p>
      <p class="text-sm font-bold text-red-900">
        <%= @game_logs.minimum(:game_date)&.strftime("%m/%d/%y") %><br>
        to <%= @game_logs.maximum(:game_date)&.strftime("%m/%d/%y") %>
      </p>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
      <h2 class="text-xl font-semibold text-gray-900">All <%= @game_logs.count %> Games (2023-24 Regular Season)</h2>
      <p class="text-sm text-gray-600 mt-1">Fantasy Score Formula: Points + Rebounds + (2 × Assists) + (3 × Blocks) + (3 × Steals)</p>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              #
            </th>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Date
            </th>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Week
            </th>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Opponent
            </th>
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              PTS
            </th>
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              REB
            </th>
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              AST
            </th>
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              BLK
            </th>
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              STL
            </th>
            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50">
              Fantasy
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @game_logs.each_with_index do |game, index| %>
            <tr class="<%= index.even? ? 'bg-white' : 'bg-gray-50' %> hover:bg-blue-50">
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                <%= index + 1 %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <%= game.game_date.strftime("%m/%d/%Y") %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-600">
                <%= game.week_number %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900">
                vs <%= game.opponent %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900 font-semibold">
                <%= game.points %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900">
                <%= game.rebounds %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900">
                <%= game.assists %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900">
                <%= game.blocks %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900">
                <%= game.steals %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-blue-900 bg-blue-50">
                <%= game.fantasy_score %>
              </td>
            </tr>
          <% end %>
        </tbody>
        <tfoot class="bg-gray-100 border-t-2 border-gray-300">
          <tr>
            <td colspan="4" class="px-4 py-3 text-sm font-bold text-gray-900 text-right">
              TOTALS:
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= @game_logs.sum(:points) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= @game_logs.sum(:rebounds) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= @game_logs.sum(:assists) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= @game_logs.sum(:blocks) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= @game_logs.sum(:steals) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-blue-900 bg-blue-100">
              <%= @game_logs.sum(:fantasy_score) %>
            </td>
          </tr>
          <tr>
            <td colspan="4" class="px-4 py-3 text-sm font-bold text-gray-900 text-right">
              AVERAGES:
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= (@game_logs.average(:points) || 0).round(1) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= (@game_logs.average(:rebounds) || 0).round(1) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= (@game_logs.average(:assists) || 0).round(1) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= (@game_logs.average(:blocks) || 0).round(1) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-gray-900">
              <%= (@game_logs.average(:steals) || 0).round(1) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-blue-900 bg-blue-100">
              <%= (@game_logs.average(:fantasy_score) || 0).round(1) %>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4">
    <div class="flex">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-yellow-800">Compare these totals with Yahoo Stats</h3>
        <div class="mt-2 text-sm text-yellow-700">
          <p>Use this page to verify our data matches Yahoo's 2023-24 regular season stats. Check:</p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Total games played should match</li>
            <li>Total points should match (exactly)</li>
            <li>Date range: 2023-24 regular season (Oct 2023 - Apr 2024)</li>
            <li>No playoff games included</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
